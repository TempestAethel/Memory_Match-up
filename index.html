<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Memory Match-Up</title>
    <style>
        body {
            background: linear-gradient(270deg, #ff7e5f, #feb47b);
            background-size: 400% 400%;
            animation: gradient 15s ease infinite;        
            color: cyan;
            font-family: 'Arial', sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            overflow: hidden;
            margin: 0;
        }

        @keyframes gradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        h1 {
            margin-bottom: 20px;
            text-shadow: 0 0 5px black, 0 0 10px cyan, 0 0 15px cyan, 0 0 20px blue;
        }

        input[type="number"] {
            padding: 10px;
            border: none;
            border-radius: 5px;
            margin-right: 10px;
            width: 80px;
            background-color: rgba(0, 0, 0, 0.7);
            color: cyan;
            box-shadow: 0 0 5px cyan;
        }

        button {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            background-color: rgba(0, 128, 128, 0.8);
            color: white;
            cursor: pointer;
            transition: background-color 0.3s, box-shadow 0.3s;
            box-shadow: 0 0 5px cyan;
        }

        button:hover {
            background-color: cyan;
            color: black;
            box-shadow: 0 0 15px blue, 0 0 20px cyan;
        }

        .container {
            width: 100%;
            max-width: 800px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .game-board {
            display: none; /* Initially hidden */
            margin-top: 20px;
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(100px, 1fr)); /* Dynamic columns */
            gap: 10px;
            width: 100%;
            max-width: 100vw; /* Fill the screen width */
            box-sizing: border-box; /* Include padding and borders */
        }

        .card {
            width: 100%; /* Fill grid cell */
            height: 0; /* Remove fixed height */
            padding-top: 100%; /* Maintain square aspect ratio */
            background-color: #444;
            position: relative; /* For absolute positioning of content */
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2em;
            color: transparent;
            border-radius: 10px;
            cursor: pointer;
            transition: background-color 0.3s, color 0.3s, border 0.3s;
        }

        .card.flipped {
            color: white;
            background-color: #555;
        }

        .card.match {
            border: 3px solid cyan;
        }

        .timer {
            margin-top: 10px;
            color: teal;
            text-shadow: 0 0 5px black, 0 0 10px cyan;
        }

        .toast {
            position: absolute;
            bottom: 20px; /* Positioned below center */
            left: 50%;
            transform: translateX(-50%);
            background-color: rgba(0, 128, 0, 0.8);
            color: white;
            padding: 10px;
            border-radius: 5px;
            display: none;
            transition: opacity 0.5s;
            box-shadow: 0 0 10px cyan;
        }
    </style>
</head>
<body>
    <h1>Memory Match-Up</h1>
    <div class="container">
        <div>
            <input type="number" id="cardCount" min="2" max="100" value="10" placeholder="No. of pairs">
            <button id="startButton">Start Game</button>
        </div>
        <div class="timer" id="timerDisplay">Time: 0s</div>
        <div class="game-board" id="gameBoard"></div>
    </div>
    <div class="toast" id="toast"></div>

    <script>
        const cards = [
            "🌙", "🌟", "🌈", "🌊", "🌻", "🔮", "🍂", "🌌", "🌱", "🦋",
            "🐚", "🌳", "❄️", "🌸", "🐉", "🎋", "🍁", "🌼", "🎆", "🦄",
            "⚡", "🌍", "🔥", "🍀", "🌠", "🐾", "🗺️", "⛰️", "🎨", "🌧️",
            "🌞", "🕊️", "🥥", "🎶", "🎈", "🧚‍♀️", "🌐", "🌕", "🏔️", "🔔",
            "🐬", "🚀", "🍒", "💫", "🥇", "⚓", "🌿", "🔑", "🧊", "🏝️",
            "🦅", "🎃", "🎩", "🏞️", "🧞‍♂️", "🏕️", "⛷️", "🚴‍♂️", "🧗‍♀️", "🎳",
            "🏹", "🎿", "🚤", "🥨", "🍕", "🍔", "🌭", "🍩", "🍦", "🍉",
            "🌽", "🍇", "🍏", "🥭", "🍍", "🍓", "🍋", "🥝", "🌶️", "🌰",
            "🍈", "🥥", "🥑", "🍊", "🌴", "🏄‍♀️", "🧜‍♀️", "🐢", "🐙", "🦈",
            "🌋", "🧙‍♂️", "🌌", "🔥", "🐾", "🥳"
        ];

        let timer;
        let seconds = 0;

        document.getElementById("startButton").addEventListener("click", function() {
            const count = Math.min(Math.max(parseInt(document.getElementById("cardCount").value) * 2, 2), 100);
            const uniquePairs = count / 2;

            const selectedCards = cards.slice(0, uniquePairs);
            const shuffledCards = [...selectedCards, ...selectedCards].sort(() => 0.5 - Math.random());
            const gameBoard = document.getElementById("gameBoard");
            gameBoard.innerHTML = '';
            gameBoard.style.display = 'grid';

            shuffledCards.forEach((card) => {
                const cardElement = document.createElement("div");
                cardElement.classList.add("card");
                cardElement.setAttribute("data-card", card);
                cardElement.addEventListener("click", flipCard);
                gameBoard.appendChild(cardElement);
            });

            // Reset timer
            clearInterval(timer);
            seconds = 0;
            document.getElementById("timerDisplay").textContent = "Time: 0s";
            timer = setInterval(() => {
                seconds++;
                document.getElementById("timerDisplay").textContent = `Time: ${seconds}s`;
            }, 1000);
        });

        let firstCard, secondCard;
        let lockBoard = false;
        let matchedCount = 0;

        function flipCard() {
            if (lockBoard || this.classList.contains('match')) return;
            this.classList.add("flipped");
            this.textContent = this.getAttribute("data-card");

            if (!firstCard) {
                firstCard = this;
                return;
            }

            secondCard = this;
            lockBoard = true;

            checkForMatch();
        }

        function checkForMatch() {
            const isMatch = firstCard.getAttribute("data-card") === secondCard.getAttribute("data-card");
            isMatch ? handleMatch() : unflipCards();
        }

        function handleMatch() {
            firstCard.classList.add('match');
            secondCard.classList.add('match');
            resetBoard();
            matchedCount += 2;

            if (matchedCount === document.querySelectorAll('.card').length) {
                clearInterval(timer);
                showToast();
            }
        }

        function unflipCards() {
            setTimeout(() => {
                firstCard.classList.remove("flipped");
                secondCard.classList.remove("flipped");
                firstCard.textContent = '';
                secondCard.textContent = '';
                resetBoard();
            }, 1500);
        }

        function resetBoard() {
            [firstCard, secondCard, lockBoard] = [null, null, false];
        }

        function showToast() {
            const toast = document.getElementById("toast");
            toast.textContent = `You Memory Matched ${matchedCount / 2} pairs in ${Math.floor(seconds / 60)}min ${seconds % 60}sec`;
            toast.style.display = 'block';
            toast.style.opacity = 1;
            setTimeout(() => {
                toast.style.opacity = 0;
                setTimeout(() => {
                    toast.style.display = 'none';
                }, 500);
            }, 3000);
        }
    </script>
</body>
</html>
